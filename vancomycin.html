<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Hospital Sungai Buloh Vancomycin Calculator</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
  <link rel="icon" type="image/png" href="assets/HSgB-ABX-SOS-Logo.png?v=3">
  <link rel="shortcut icon" type="image/png" href="assets/HSgB-ABX-SOS-Logo.png?v=3">
  <link rel="stylesheet" href="assets/style.css"> 
</head>
<body>

  <header class="header">
    <div class="header-left" onclick="window.location.href='index.html'" style="cursor:pointer;">
      <img src="assets/HSgB-ABX-SOS-Logo.png" alt="HSgB Icon" class="header-icon">
      <div class="header-title-block">
        <div class="header-title">Hospital Sungai Buloh Vancomycin Calculator</div>
        <div class="header-subtitle">Quick Dosing Calculator for Hospital Sungai Buloh Staff</div>
      </div>
    </div>
    <div class="header-right">
      <div class="menu">
        <button class="dropdown-toggle" onclick="toggleMenu(event)">‚ãÆ</button>
        <div class="dropdown-menu" id="dropdownMenu">
          <a href="vancomycin.html">Vancomycin Dose Calculator</a>
          <a href="tdm-sampling.html">TDM Sampling Guide</a>
          <a href="bw.html">Body Weight (BW) Calculator</a>
          <a href="crcl.html">Renal Function (CrCl) Calculator</a>
        </div>
      </div>
    </div>
  </header>

  <div class="container">
    <div id="vancomycin" class="page active">
      <div class="nav-buttons">
        <button class="nav-button home" onclick="window.location.href='index.html'">HOME</button>
        <button class="nav-button clear" onclick="clearVancomycinInputs()">CLEAR</button>
      </div>

      <div class="page-title-block">
        <h1>Vancomycin Dose Calculator</h1>
        <div class="input-note-style">
          <strong>Input Patient Parameters.</strong> <br> Ensure all required patient data are entered accurately before proceeding. <br> All dose calculations are for adult patients only.
        </div>
      </div>

      <div class="card">
        <h3>Patient Inputs</h3>
        <form id="vancomycinForm">
          <div class="form-group">
            <label for="abw">Actual Body Weight (ABW) (kg):</label>
            <input type="number" id="abw" step="0.1" placeholder="e.g., 70">
            <div id="abwWarning" class="warning-card" style="display:none; margin-top: 10px; font-style: normal;">
              <strong>√É¬¢√Ö¬°√Ç¬†√É¬Ø√Ç¬∏√Ç¬è Weight entered is below the validated range for adult patients.</strong><br>
              Please consult the Infectious Diseases (ID) or TDM Pharmacy team (Ext: 4124) for individualized dosing advice.
            </div>
          </div>

          <div class="form-group">
            <label for="dialysisStatus">Dialysis Status:</label>
            <select id="dialysisStatus">
              <option value="">-- Please select --</option>
              <option value="notHD">Not on Haemodialysis</option>
              <option value="HD">ESRF on Haemodialysis (HD)</option>
            </select>
          </div>

          <div id="crclGroup" class="form-group" style="display:none;">
            <div class="form-group">
                <label for="scr_input">Serum Creatinine (Œºmol/L) (optional):</label>
                <input type="number" id="scr_input" step="1" placeholder="e.g., 85">
            </div>
            <label for="crcl">Creatinine Clearance (CrCl) (ml/min):</label>
            <input type="number" id="crcl" step="0.1" placeholder="e.g., 45">
            <p class="input-footnote">
              Need help? <a href="crcl.html" target="_blank">üîó Renal Function (CrCl) Calculator</a>
            </p>
          </div>

          <div id="timingGroup" class="form-group" style="display:none;">
            <label for="dialysisTiming">Vancomycin-Dialysis Timing:</label>
            <select id="dialysisTiming">
              <option value="">-- Please select --</option>
              <option value="beforeHD">Vancomycin started or planned to be given BEFORE dialysis</option>
              <option value="duringHD">Vancomycin planned to be given DURING dialysis</option>
            </select>
          </div>

          <div class="form-group">
            <label for="indication">Indication of Vancomycin:</label>
            <select id="indication">
              <option value="">-- Please select --</option>
              <option value="MRSA">MRSA Infection (Bacteraemia / Endocarditis / Pneumonia / Bone or Joint Infection / Neutropenic Fever)</option>
              <option value="CNS">CNS Infection</option>
              <option value="SSTI">Skin and Soft Tissue Infection (SSTI)</option>
              <option value="UTI">Urinary Tract Infection (UTI)</option>
              <option value="MRCONS">MRCONS Infection</option>
              <option value="Enterococcus">Enterococcus faecium Infection</option>
            </select>
          </div>

          <div class="form-group">
            <label for="ivAccess">Type of IV Access Available:</label>
            <select id="ivAccess">
              <option value="">-- Please select --</option>
              <option value="peripheral">Peripheral line</option>
              <option value="central">Central line</option>
            </select>
            <p id="ivAccessFootnote" class="input-footnote" style="display:none;"></p>
          </div>
        </form>
      </div>

      <div id="vancomycinOutput" style="display:none;">

        <h3>Summary of Inputs</h3>
        <div id="summaryOutput" class="card"></div>
<br>
        <h3>STEP 1: Loading Dose (LD)</h3>
        <div id="ldOutput" class="card"></div>
        <div class="note-card">
          üí° <strong>Notes:</strong>
          <ul>
            <li>Loading Dose ‚Äì To be given to ALL patients regardless of renal function.</li>
            <li>Max Vancomycin dose: 2 g/DOSE.</li>
            <li id="ldFootnoteHD" style="display:none;">If HD occurs on the same day as the loading dose, administer a TOP-UP DOSE post-HD.</li>
          </ul>
        </div>
<br>
        <h3>STEP 2: Maintenance Dose (MD) & Frequency</h3>
        <div id="mdOutput" class="card"></div>
        <div id="mdFootnote" style="display:none;"></div>
<br>
        <h3>STEP 3: Administration (Dilution & Infusion Rate)</h3>
        <div id="adminOutput" class="card">
          
          <h4>3.1 Loading Dose Dilution & Administration:</h4>
          <div id="ldAdminOutput" class="output-box"></div>

          <h4>3.2 Maintenance Dose Dilution & Administration:</h4>
          <div id="mdAdminOutput" class="output-box"></div>

          <div class="note-card">
            üí° <strong>Maximum Infusion Rate:</strong>
            <ul>
              <li>Do not exceed 10 mg/min.</li>
              <li>Infusing too rapidly may cause infusion-related reactions (Red Man Syndrome).</li>
            </ul>
          </div>

          <a class="collapsible-header" onclick="toggleCollapsible('warningCollapse')">Step 3.3 ‚Äì Special Warnings & Adjustments</a>
          <div id="warningCollapse" class="collapsible-content">
            
            <div class="card" style="background-color: var(--color-white); margin-bottom: 15px;">
              <div class="warning-title">
                <span class="icon">!</span> Vancomycin Infusion Reaction (VIR / ‚ÄúRed Man Syndrome‚Äù)
              </div>
              <ul>
                <li>VIR is a common infusion-related reaction, not an allergy.</li>
                <li>Symptoms: Itching, flushing, and erythematous rash involving the face, neck, or upper trunk.</li>
                <li>Management:</li>
                <ul style="margin-left: 20px;">
                  <li>Stop or slow the infusion rate ‚Äî symptoms usually resolve.</li>
                  <li>Antihistamines (e.g., chlorpheniramine or diphenhydramine) may help if symptoms persist.</li>
                  <li>For subsequent doses, infuse at &le; 10 mg/min to minimize recurrence.</li>
                </ul>
              </ul>
            </div>

            <div class="card" style="background-color: var(--color-white); margin-bottom: 15px;">
              <div class="warning-title">
                <span class="icon">!</span> Fluid Volume Considerations - High Dilution Volume Advisory
              </div>
              <p style="margin-top: 5px;">For patients with fluid restrictions or heart failure, consider alternative dilution strategy or slower infusion rate.</p>
            </div>

            <div class="card" style="background-color: var(--color-white); margin-bottom: 15px;">
              <div class="warning-title">
                <span class="icon">!</span> Phlebitis / Peripheral Line Irritation Risk
              </div>
              <p style="margin-top: 5px;">Peripheral administration of vancomycin may cause local irritation or phlebitis, particularly at higher concentrations. Use the largest available vein and monitor the site for redness, pain, or swelling</p>
            </div>
            
          </div> </div> <br>
        <h3>STEP 4: Therapeutic Drug Monitoring (TDM) Guidance</h3>
<div id="tdmOutput" class="card">
  <h4>4.1. When to Take the First TDM Sample</h4>
  <div id="tdmTimingOutput" class="output-box"></div>

  <h4 id="tdmSamplingHeading">4.2. Do you need a post-dose (Peak) level?</h4>
  <div id="tdmSamplingOutput" class="output-box"></div>

  <div class="note-card">
    üí° <strong>General Advisory:</strong>
    <ul>
      <li>If the sampling time falls after office hours (AOH), it is recommended to collect the sample the following morning.</li>
<br>
    <strong>Documentation Reminder:</strong>
      <li>TDM results are meaningless unless:
        <ol>
          <li>The prescribed dose was correctly administered, and</li>
          <li>The exact timing of infusion and sampling is accurately recorded.</li>
        </ol>
      </li>
    </ul>
    <p>Record all relevant details in the üìÑ <a href="https://amshsgb.wixsite.com/my-site/_files/ugd/b064f1_41ed8df4c61f4c24a6bb2ebcff1cea7c.pdf" target="_blank">Vancomycin AUC Monitoring Form</a></p>
  </div>
</div>
<br>
        <h3>STEP 5: Patient / Laboratory Monitoring</h3>
        <div class="card">
          <ul>
            <li>Monitor renal profile (RP) and urine output regularly.</li>
            <li>Ensure the patient remains well hydrated while on Vancomycin.</li>
            <li>Avoid concomitant nephrotoxic agents where possible.</li>
            <li>Monitor WBC, CRP & Vital Signs for signs of improvement/deterioration.</li>
          </ul>
        </div>
<br>
        <h2 style="margin-top: 20px; color: var(--color-primary-dark);">Clinical Note Section (Auto-Generated)</h2>
        <div class="input-note-style" style="margin-bottom: 20px;">
Disclaimer! This note is intended as a template only - please review and adjust it based on your clinical assessment and professional judgement.
        </div>

        <div id="clinicalNoteContainer" class="card clinical-note-card">
          <div id="clinicalNoteContent">
            
            <!-- Header with maroon background and white text -->
            <div style="background-color: #800000; padding: 15px 15px 15px 20px; margin: 0 -20px 20px -20px; border-radius: 8px 8px 0 0;">
              <p style="font-weight: 700; margin: 0; font-size: 15px; font-family: Arial, sans-serif; letter-spacing: 0.8px; color: #FFFFFF !important;">
                  VANCOMYCIN THERAPY RECOMMENDATION
              </p>
            </div>
            
            <!-- Introduction with better formatting -->
            <div style="margin-bottom: 24px; padding: 12px; background-color: #FFF9E6; border-left: 4px solid #FFA726; border-radius: 4px;">
              <p style="margin: 0; font-weight: 400; color: #000000; line-height: 1.6; font-size: 13px;">
                  Received query from Dr <input type="text" id="dr_input" value="" placeholder="Name" style="border: none; border-bottom: 2px solid #FF6F00; background: transparent; width: 150px; padding: 2px 4px; font-family: Arial, sans-serif; font-size: 13px; font-weight: 600;"> regarding IV Vancomycin initiation for this patient.
              </p>
            </div>
            
            <!-- Patient Summary Section with improved design -->
            <div style="margin-bottom: 24px;">
              <div style="font-weight: 700; color: #1565C0; font-size: 14px; margin-bottom: 10px; font-family: Arial, sans-serif; padding-bottom: 6px; border-bottom: 2px solid #1565C0;">
                üìã PATIENT SUMMARY
              </div>
              <div style="background-color: #F0F7FF; padding: 16px; border-radius: 6px; border-left: 4px solid #1565C0;">
                <ul id="noteSummaryList" style="margin: 0 0 8px 0; padding-left: 0; list-style-position: inside; line-height: 2.0; font-size: 13px; color: #333; font-family: Arial, sans-serif;"></ul>
              </div>
            </div>

            <!-- Recommended Regimen Section with clear separation -->
            <div style="margin-bottom: 24px;">
              <div style="font-weight: 700; color: #FF6F00; font-size: 14px; margin-bottom: 10px; font-family: Arial, sans-serif; padding-bottom: 6px; border-bottom: 2px solid #FF6F00;">
                üíâ RECOMMENDED REGIMEN
              </div>
              <div style="background-color: #FFF8F0; padding: 16px; border-radius: 6px; border-left: 4px solid #FF6F00;">
                <div style="margin-bottom: 14px; padding-bottom: 14px; border-bottom: 1px dashed #FFE0B2;">
                  <p style="margin: 0 0 6px 0; font-weight: 800; color: #E65100; font-size: 14px;">
                    <strong>üî∏ Loading Dose</strong>
                  </p>
                  <p id="noteLDRegimen" style="margin: 0; line-height: 1.7; font-size: 13px; color: #333; padding-left: 20px;"></p>
                </div>
                <div>
                  <p style="margin: 0 0 6px 0; font-weight: 800; color: #0D47A1; font-size: 14px;">
                    <strong>üî∏ Maintenance Dose</strong>
                  </p>
                  <p id="noteMDRegimen" style="margin: 0; line-height: 1.7; font-size: 13px; color: #333; padding-left: 20px;"></p>
                </div>
              </div>
            </div>

            <!-- TDM Section with enhanced readability -->
            <div style="margin-bottom: 24px;">
              <div style="font-weight: 700; color: #00897B; font-size: 14px; margin-bottom: 10px; font-family: Arial, sans-serif; padding-bottom: 6px; border-bottom: 2px solid #00897B;">
                ü©∫ THERAPEUTIC DRUG MONITORING (TDM)
              </div>
              <div style="background-color: #E8F5E9; padding: 16px; border-radius: 6px; border-left: 4px solid #00897B;">
                <div style="margin-bottom: 14px; padding: 10px; background-color: white; border-radius: 4px; border: 1px solid #C8E6C9;">
                  <p id="noteTDM1" style="margin: 0 0 8px 0; line-height: 1.7; font-size: 13px; font-weight: 600; color: #1B5E20;">TDM instructions not generated.</p>
                  <p id="noteTDM2" style="margin: 0; line-height: 1.7; font-size: 13px; font-weight: 600; color: #1B5E20;"></p>
                </div>
                
                <div style="font-size: 12px; color: #555; line-height: 1.8; margin-top: 12px;">
                  <p style="margin: 0 0 6px 0;">
                    <strong style="color: #00695C;">Important:</strong>
                  </p>
                  <p style="margin: 0 0 6px 0; padding-left: 12px;">‚Ä¢ TDM blood sample should be obtained via venipuncture whenever possible, from the arm opposite to drug administration.</p>
                  <p style="margin: 0; padding-left: 12px;">‚Ä¢ Do not collect TDM samples from central lines (e.g. PICC, CVC, or other central venous catheters).</p>
                </div>
              </div>
            </div>

            <!-- Remarks Section with professional styling -->
            <div style="margin-bottom: 0;">
              <div style="font-weight: 700; color: #D32F2F; font-size: 14px; margin-bottom: 10px; font-family: Arial, sans-serif; padding-bottom: 6px; border-bottom: 2px solid #D32F2F;">
                ‚ö†Ô∏è REMARKS
              </div>
              <div style="background-color: #FFEBEE; padding: 16px; border-radius: 6px; border-left: 4px solid #D32F2F;">
                <ul style="margin: 0 0 8px 0; padding-left: 0; list-style-position: inside; line-height: 2.0; font-size: 13px; color: #333; font-family: Arial, sans-serif;">
                  <li>Monitor renal profile (RP) and urine output regularly.</li>
                  <li>Ensure the patient remains well hydrated while on Vancomycin.</li>
                  <li>Avoid concomitant nephrotoxic agents where possible.</li>
                  <li>Infusion rate must not exceed 10 mg/min to minimize infusion-related reactions.</li>
                </ul>
              </div>
            </div>

          </div>

          <div class="copy-button-container">
            <button class="copy-button" onclick="copyClinicalNote()">
                üìã Copy to Notes
                <span class="tooltip-text">Copy this note to your clinical documentation.</span>
            </button>
          </div>
        </div>

        <div class="card note-card">
          <h3>Vancomycin Calculator Disclaimer</h3>
          <ul>
            <li>Recommendation is based on Hospital Sungai Buloh Vancomycin Protocol. üîó <a href="https://amshsgb.wixsite.com/my-site/_files/ugd/b064f1_9106727a6d0748b2a4a9d448af16208a.pdf" target="_blank">Refer to Hosp Sungai Buloh Vancomycin Protocol</a>.</li>
            <li>Clinical correlation is required.</li>
            <li>If in any doubt, call TDM Pharmacy (Ext: 4124) or refer to Infectious Disease (ID).</li>
            <li>Referral to ID or AMS Team is strongly recommended for all MRSA or Vancomycin cases.</li>
          </ul>
        </div> 
      </div>  
      </div> </div> </div> <footer class="footer"></footer>

<script src="assets/shared.js"></script>
<script src="assets/vancomycin.js"></script>
<script>
  document.addEventListener('DOMContentLoaded', () => {
    document.querySelectorAll('form').forEach(form => {
        form.addEventListener('submit', (e) => e.preventDefault());
    });
    
    const calculatorInputs = document.querySelectorAll('#vancomycin input, #vancomycin select');
    
    calculatorInputs.forEach(element => {
      // 1. Always attach main calculation listener
      element.addEventListener('input', calculateVancomycin);
      element.addEventListener('change', calculateVancomycin);
      
      // 2. Attach specific conditional logic handlers for required dropdowns
      if (element.id === 'dialysisStatus') {
          // This must run when the dialysis status changes to show/hide CrCl inputs
          element.addEventListener('change', toggleCrClInput);
      }
      if (element.id === 'ivAccess') {
          // This must run when the IV access changes to update the footnote
          element.addEventListener('change', displayIvAccessFootnote);
      }
    });
  });
</script>
</body>

</html>


